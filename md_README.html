<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChrisTest-Java: nebula-java</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChrisTest-Java
   &#160;<span id="projectnumber">3.6.0</span>
   </div>
   <div id="projectbrief">Test doxygen features</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">nebula-java </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="https://img.shields.io/badge/language-java-orange.svg" alt="" style="pointer-events: none;" class="inline"/> <a href="https://github.com/vesoft-inc/nebula-java/blob/master/LICENSE"><img src="https://img.shields.io/github/license/vesoft-inc/nebula-java.svg" alt="LICENSE" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/vesoft-inc/nebula-java/releases"><img src="https://img.shields.io/github/tag/vesoft-inc/nebula-java.svg?label=release" alt="GitHub release" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/vesoft-inc/nebula-java/releases"><img src="https://img.shields.io/github/release-date/vesoft-inc/nebula-java.svg" alt="GitHub release date" style="pointer-events: none;" class="inline"/></a> <a href="https://codecov.io/gh/vesoft-inc/nebula-java"><img src="https://codecov.io/gh/vesoft-inc/nebula-java/branch/master/graph/badge.svg?token=WQVAG6VMMQ" alt="codecov" style="pointer-events: none;" class="inline"/></a></p>
<p>Nebula Java is a Java client for developers to connect their projects to Nebula Graph.</p>
<p>Please be noted that <a href="https://github.com/vesoft-inc/nebula-jdbc">nebula-JDBC</a>(based on nebula-java) is the JDBC implementing for nebula graph.</p>
<blockquote class="doxtable">
<p><b>NOTE</b>: Nebula Java is not thread-safe. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md1"></a>
Two main branches of this repository</h1>
<p>In this repository, you can find two branches for the source code of Nebula Java of different versions.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
The master branch</h2>
<p>The master branch is for Nebula Java v2.0, which works with Nebula Graph v2.0 nightly.</p>
<p>This README file provides Java developers with instructions on how to connect to Nebula Graph v2.0.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
The v1.0 branch</h2>
<p>In the v1.0 branch, you can find source code of these:</p>
<ul>
<li>Nebula Java v1.0, which works with Nebula Graph v1.1.0 and earlier versions only.</li>
<li>Nebula Graph Exchange, Nebula Spark Connector, Nebula Flink Connector, and nebula-algorithm.</li>
</ul>
<p>For more information, see <a href="https://github.com/vesoft-inc/nebula-java/blob/v1.0/README.md">README of v1.0</a>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
The v2.0.0-rc branch</h2>
<p>The v2.0.0-rc branch works with Nebula Graph v2.0.0-beta and v2.0.0-rc1, but not for the latest nightly Nebula Graph.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Prerequisites</h1>
<p>To use this Java client, do a check of these:</p>
<ul>
<li>Java 8 or a later version is installed.</li>
<li>Nebula Graph is deployed. For more information, see <a href="https://docs.nebula-graph.io/master/4.deployment-and-installation/1.resource-preparations/" title="Click to go to Nebula Graph website">Deployment and installation of Nebula Graph</a>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Modify pom.xml</h1>
<p>If you use Maven to manage your project, add the following dependency to your <code>pom.xml</code> file. Replace <code>3.0-SNAPSHOT</code> with an appropriate Nebula Java version. For more versions, visit <a href="https://github.com/vesoft-inc/nebula-java/releases">releases</a>.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">dependency</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">groupId</span>&gt;<span class="keyword">com.vesoft</span>&lt;/<span class="keywordtype">groupId</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">artifactId</span>&gt;<span class="keyword">client</span>&lt;/<span class="keywordtype">artifactId</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">version</span>&gt;3.0-<span class="keyword">SNAPSHOT</span>&lt;/<span class="keywordtype">version</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">dependency</span>&gt;</div>
</div><!-- fragment --><p>There are the version correspondence between client and Nebula:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Client version   </th><th class="markdownTableHeadCenter">Nebula Version    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">1.0.0   </td><td class="markdownTableBodyCenter">1.0.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1.0.1   </td><td class="markdownTableBodyCenter">1.1.0,1.2.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">1.1.0   </td><td class="markdownTableBodyCenter">1.1.0,1.2.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1.2.0   </td><td class="markdownTableBodyCenter">1.1.0,1.2.0,1.2.1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2.0.0-beta   </td><td class="markdownTableBodyCenter">2.0.0-beta    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">2.0.0-rc1   </td><td class="markdownTableBodyCenter">2.0.0-rc1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2.0.0   </td><td class="markdownTableBodyCenter">2.0.0,2.0.1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">2.0.1   </td><td class="markdownTableBodyCenter">2.0.0,2.0.1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2.5.0   </td><td class="markdownTableBodyCenter">2.5.0,2.5.1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">2.6.0   </td><td class="markdownTableBodyCenter">2.6.0,2.6.1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2.6.1   </td><td class="markdownTableBodyCenter">2.6.0,2.6.1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">3.x   </td><td class="markdownTableBodyCenter">3.x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">3.0-SNAPSHOT   </td><td class="markdownTableBodyCenter">nightly   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md7"></a>
Graph client example</h1>
<p>To connect to the <code>nebula-graphd</code> process of Nebula Graph:</p>
<div class="fragment"><div class="line">NebulaPoolConfig nebulaPoolConfig=<span class="keyword">new</span> NebulaPoolConfig();</div>
<div class="line">        nebulaPoolConfig.setMaxConnSize(10);</div>
<div class="line">        List&lt;HostAddress&gt; addresses=Arrays.asList(<span class="keyword">new</span> HostAddress(<span class="stringliteral">&quot;127.0.0.1&quot;</span>,9669),</div>
<div class="line">        <span class="keyword">new</span> HostAddress(<span class="stringliteral">&quot;127.0.0.1&quot;</span>,9670));</div>
<div class="line">        NebulaPool pool=<span class="keyword">new</span> NebulaPool();</div>
<div class="line">        pool.init(addresses,nebulaPoolConfig);</div>
<div class="line">        Session session=pool.getSession(<span class="stringliteral">&quot;root&quot;</span>,<span class="stringliteral">&quot;nebula&quot;</span>,<span class="keyword">false</span>);</div>
<div class="line">        session.execute(<span class="stringliteral">&quot;SHOW HOSTS;&quot;</span>);</div>
<div class="line">        session.release();</div>
<div class="line">        pool.close();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Graph SessionPool example</h1>
<p>To use SessionPool, you must config the space to connect for SessionPool. The SessionPool is thread-safe, and support retry(release old session and get available session from SessionPool) for both connection error, session error and execution error(caused by bad storaged server), and the retry mechanism needs users to config retryTimes and intervalTime between retrys.</p>
<p>And SessionPool maintains servers' status, can isolation broken graphd server and auto routing restarted graphd server when you need to execute with new session， meaning your parallel is larger than the idle session number in the session pool.</p>
<div class="fragment"><div class="line">List&lt;HostAddress&gt; addresses=Arrays.asList(<span class="keyword">new</span> HostAddress(<span class="stringliteral">&quot;127.0.0.1&quot;</span>,9669));</div>
<div class="line">        String spaceName=<span class="stringliteral">&quot;test&quot;</span>;</div>
<div class="line">        String user=<span class="stringliteral">&quot;root&quot;</span>;</div>
<div class="line">        String password=<span class="stringliteral">&quot;nebula&quot;</span>;</div>
<div class="line">        SessionPoolConfig sessionPoolConfig=<span class="keyword">new</span> SessionPoolConfig(addresses,spaceName,user,password);</div>
<div class="line">        sessionPoolConfig.setRetryTimes(3);</div>
<div class="line">        sessionPoolConfig.setIntervalTime(1000);</div>
<div class="line">        SessionPool sessionPool=<span class="keyword">new</span> SessionPool(sessionPoolConfig);</div>
<div class="line">        <span class="keywordflow">if</span>(!sessionPool.init()){</div>
<div class="line">        log.error(<span class="stringliteral">&quot;session pool init failed.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">        ResultSet resultSet;</div>
<div class="line">        <span class="keywordflow">try</span>{</div>
<div class="line">        resultSet=sessionPool.execute(<span class="stringliteral">&quot;match (v:player) return v limit 1;&quot;</span>);</div>
<div class="line">        System.out.println(resultSet.toString());</div>
<div class="line">        }<span class="keywordflow">catch</span>(IOErrorException|ClientServerIncompatibleException|AuthFailedException|BindSpaceFailedException e){</div>
<div class="line">        e.printStackTrace();</div>
<div class="line">        System.exit(1);</div>
<div class="line">        }<span class="keywordflow">finally</span>{</div>
<div class="line">        sessionPool.close();</div>
<div class="line">        }</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
